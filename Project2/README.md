CECS 285
Project 2: 8051 Timer and Interrupt 
Purpose:
The purpose of this lab is to help students learn how to program 8051, hardware timers and external interrupts. 
Description:
Modify project 1 to perform the following 4 different LED display modes:
1.	Mode 1: bouncing mode. One light starts from the left outmost LED, move toward right one position at a time until it reaches the right most LED; then it start to move to left one position at a time until it reaches the left most LED, then repeat the sequence. One complete sequence of displays is shown below. (A filled circle represent a lighted LED)
•???????, ?•??????, ??•?????, ???•????, ????•???, ?????•??, ??????•?,???????•, ??????•?, ?????•??, ????•???, ???•????, ??•?????, ?•??????.
2.	Mode 2: counting mode. Count up or down depending on an external switch setting: 0 for counting up, 1 for counting down. When in counting up setting, count up from the number given by an add-on dip switch input and round down to 0 when reaches 255. When in counting down setting, count down from the number given by an add-on dip switch input and round up to 255 when reaches 0.
3.	Mode 3: double bouncing mode: •??????•,?•????•?, ??•??•??, ???••???, ??•??•??, ?•????•?, •??????•,   then repeat.
4.	Mode 4: cyclic mode. ????????, •???????, ••??????, •••?????, ••••????, •••••???, ••••••??, •••••••?, ••••••••,   then repeat.

Mode Control: Use on-board dip switches 0-3 to select the mode: P0.0 controls Mode 1, P0.1 controls Mode 2, P0.2 controls Mode 3, P0.3 controls Mode 4. Lower index pins have higher priority. For example, if both P0.0 and P0.3 is on, display Mode 1 instead of Mode 4. When all 4 pins are off, flash all LEDs: turn on and off all of them every 0.5 second. When you start running your system, your system should enter a display mode according to the initial mode setting on your board. If no mode is set when starting your system, flash all LEDs.

Speed Control: Use on-board dip switches 4-7 to select display speed. Pin 4 sets delay to be 0.5 second, pin 5 sets delay to be 1 second; pin 6 sets delay to be 1.5 second, pin 7 sets delay to be 2 second. When all 4 pins are off, use half second delay between two displays. When multiple pins are on, the lowest index pin determines the speed setting. Use hardware timer to generate the required delay.

Initial Values Setting For Counting Modes: Use an extra dip-switch to set the initial value for up/down counting. Use external interrupt to switch from one mode to another. You can use a push button to generate the interrupt.

Changing Modes: the mode can be changed only when an external interrupt is detected. This external interrupt is generated by the external push button. To change the mode, we set the new mode on the higher 4 pins of the on-board dip switch, then press the external push button once.

Changing Speed: Speed can be changed either after each delay period or when we change the mode. Change speed after each delay period: at the end of each delay period, check if there is a speed change.

System Response Time: your embedded system should be able to switch to the new mode as soon as an interrupt is detected; the system should not wait until finishing displaying all patterns for the current mode.

Submission:
Demonstrate your project to the instructor first, then submit the source code to beachboard dropbox.

